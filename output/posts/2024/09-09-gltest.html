<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/app.css">
    <script type="text/javascript" src="/assets/app.js"></script>
    
    <title>GLtest</title>
    <meta name="description" content="First steps with OpenGL in Elixir">
  
  </head>

  <body class="bg-nor-easter text-smurf-blood">
    <div class="flex h-60 min-h-screen flex-col items-center">
      <header class="bg-bludacris p-10 my-4 lg:mt-10 lg:mb-14">
        <h1><a href="https://andyleclair.dev/">andy@andyleclair.dev</a>$><span class="blink">_</span></h1>
      </header>
      <main class="relative grow min-h-96 flex-1 p-4">
        
  <article class="prose lg:prose-xl prose-pre:bg-codebg">
    <h1>GLtest</h1>
    <h3>First steps with OpenGL in Elixir</h3>
    <h3><a href="https://www.youtube.com/watch?v=7ny2t1I6aTo">Related Listening</a></h3>
    <p class="text-smurf-blood">Posted on 2024-09-09</p>
    <p>
Inspired by <a href="https://elixirforum.com/t/opengl-rendered-breakout-clone-in-elixir/65250/15">this thread on Elixir Forum</a> I wanted to mess around with graphics programming in Elixir. I haven’t really touched graphics
programming since I was in college (go huskies!) but I remember it being a lot of fun. Elixir is 
pretty fast and I know a few performance tricks I’ve learned on the job, so let’s see how we can do.</p>
<p>
<a href="https://wtfleming.github.io/blog/getting-started-opengl-elixir/">Other</a> <a href="https://hidnasio.github.io/elixir/wxerlang/2022/06/29/advance-wx-erlang-hello-world.html">people</a> have mentioned methods to get at some of the OpenGL macros that are in Erlang, so we can start with that. We’ll need those to interact with OpenGL and wxWidgets.</p>
<pre><code class="fish">mix new --sup gltest &amp;&amp; cd gltest
mkdir src/</code></pre>
<p>
These files are lifted directly from <a href="https://github.com/harrisi/elixir_breakout/tree/main/src">here</a></p>
<pre><code class="makeup erlang"><span class="c1">%% src/gl_const.erl</span><span class="w">
</span><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="1153826811-1">(</span><span class="ss">gl_const</span><span class="p" data-group-id="1153826811-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">compile</span><span class="p" data-group-id="1153826811-2">(</span><span class="ss">nowarn_export_all</span><span class="p" data-group-id="1153826811-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">compile</span><span class="p" data-group-id="1153826811-3">(</span><span class="ss">export_all</span><span class="p" data-group-id="1153826811-3">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="1153826811-4">(</span><span class="s">&quot;wx/include/gl.hrl&quot;</span><span class="p" data-group-id="1153826811-4">)</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_depth_test</span><span class="p" data-group-id="1153826811-5">(</span><span class="p" data-group-id="1153826811-5">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_DEPTH_TEST</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_lequal</span><span class="p" data-group-id="1153826811-6">(</span><span class="p" data-group-id="1153826811-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_LEQUAL</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_color_buffer_bit</span><span class="p" data-group-id="1153826811-7">(</span><span class="p" data-group-id="1153826811-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_COLOR_BUFFER_BIT</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_depth_buffer_bit</span><span class="p" data-group-id="1153826811-8">(</span><span class="p" data-group-id="1153826811-8">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_DEPTH_BUFFER_BIT</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_triangles</span><span class="p" data-group-id="1153826811-9">(</span><span class="p" data-group-id="1153826811-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TRIANGLES</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_array_buffer</span><span class="p" data-group-id="1153826811-10">(</span><span class="p" data-group-id="1153826811-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_element_array_buffer</span><span class="p" data-group-id="1153826811-11">(</span><span class="p" data-group-id="1153826811-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_static_draw</span><span class="p" data-group-id="1153826811-12">(</span><span class="p" data-group-id="1153826811-12">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_STATIC_DRAW</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_vertex_shader</span><span class="p" data-group-id="1153826811-13">(</span><span class="p" data-group-id="1153826811-13">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_VERTEX_SHADER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_fragment_shader</span><span class="p" data-group-id="1153826811-14">(</span><span class="p" data-group-id="1153826811-14">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FRAGMENT_SHADER</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_compile_status</span><span class="p" data-group-id="1153826811-15">(</span><span class="p" data-group-id="1153826811-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_COMPILE_STATUS</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_link_status</span><span class="p" data-group-id="1153826811-16">(</span><span class="p" data-group-id="1153826811-16">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_LINK_STATUS</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_float</span><span class="p" data-group-id="1153826811-17">(</span><span class="p" data-group-id="1153826811-17">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FLOAT</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_false</span><span class="p" data-group-id="1153826811-18">(</span><span class="p" data-group-id="1153826811-18">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FALSE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_true</span><span class="p" data-group-id="1153826811-19">(</span><span class="p" data-group-id="1153826811-19">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TRUE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_unsigned_int</span><span class="p" data-group-id="1153826811-20">(</span><span class="p" data-group-id="1153826811-20">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_UNSIGNED_INT</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_unsigned_byte</span><span class="p" data-group-id="1153826811-21">(</span><span class="p" data-group-id="1153826811-21">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_UNSIGNED_BYTE</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_front_and_back</span><span class="p" data-group-id="1153826811-22">(</span><span class="p" data-group-id="1153826811-22">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_line</span><span class="p" data-group-id="1153826811-23">(</span><span class="p" data-group-id="1153826811-23">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_LINE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_fill</span><span class="p" data-group-id="1153826811-24">(</span><span class="p" data-group-id="1153826811-24">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FILL</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_debug_output</span><span class="p" data-group-id="1153826811-25">(</span><span class="p" data-group-id="1153826811-25">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_DEBUG_OUTPUT</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_texture_2d</span><span class="p" data-group-id="1153826811-26">(</span><span class="p" data-group-id="1153826811-26">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_2D</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_texture_wrap_s</span><span class="p" data-group-id="1153826811-27">(</span><span class="p" data-group-id="1153826811-27">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_WRAP_S</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_texture_wrap_t</span><span class="p" data-group-id="1153826811-28">(</span><span class="p" data-group-id="1153826811-28">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_WRAP_T</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_texture_min_filter</span><span class="p" data-group-id="1153826811-29">(</span><span class="p" data-group-id="1153826811-29">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_texture_mag_filter</span><span class="p" data-group-id="1153826811-30">(</span><span class="p" data-group-id="1153826811-30">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_rgb</span><span class="p" data-group-id="1153826811-31">(</span><span class="p" data-group-id="1153826811-31">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_RGB</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_rgba</span><span class="p" data-group-id="1153826811-32">(</span><span class="p" data-group-id="1153826811-32">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_RGBA</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_multisample</span><span class="p" data-group-id="1153826811-33">(</span><span class="p" data-group-id="1153826811-33">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_MULTISAMPLE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_luminance</span><span class="p" data-group-id="1153826811-34">(</span><span class="p" data-group-id="1153826811-34">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_LUMINANCE</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_texture0</span><span class="p" data-group-id="1153826811-35">(</span><span class="p" data-group-id="1153826811-35">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE0</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_cull_face</span><span class="p" data-group-id="1153826811-36">(</span><span class="p" data-group-id="1153826811-36">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_CULL_FACE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_back</span><span class="p" data-group-id="1153826811-37">(</span><span class="p" data-group-id="1153826811-37">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_BACK</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_front</span><span class="p" data-group-id="1153826811-38">(</span><span class="p" data-group-id="1153826811-38">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FRONT</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_ccw</span><span class="p" data-group-id="1153826811-39">(</span><span class="p" data-group-id="1153826811-39">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_CCW</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_cw</span><span class="p" data-group-id="1153826811-40">(</span><span class="p" data-group-id="1153826811-40">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_CW</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_info_log_length</span><span class="p" data-group-id="1153826811-41">(</span><span class="p" data-group-id="1153826811-41">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_INFO_LOG_LENGTH</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_blend</span><span class="p" data-group-id="1153826811-42">(</span><span class="p" data-group-id="1153826811-42">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_BLEND</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_src_alpha</span><span class="p" data-group-id="1153826811-43">(</span><span class="p" data-group-id="1153826811-43">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_SRC_ALPHA</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_one</span><span class="p" data-group-id="1153826811-44">(</span><span class="p" data-group-id="1153826811-44">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_ONE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_one_minus_src_alpha</span><span class="p" data-group-id="1153826811-45">(</span><span class="p" data-group-id="1153826811-45">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_ONE_MINUS_SRC_ALPHA</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_repeat</span><span class="p" data-group-id="1153826811-46">(</span><span class="p" data-group-id="1153826811-46">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_REPEAT</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_linear</span><span class="p" data-group-id="1153826811-47">(</span><span class="p" data-group-id="1153826811-47">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_LINEAR</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_nearest</span><span class="p" data-group-id="1153826811-48">(</span><span class="p" data-group-id="1153826811-48">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_NEAREST</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_framebuffer</span><span class="p" data-group-id="1153826811-49">(</span><span class="p" data-group-id="1153826811-49">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FRAMEBUFFER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_renderbuffer</span><span class="p" data-group-id="1153826811-50">(</span><span class="p" data-group-id="1153826811-50">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_RENDERBUFFER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_color_attachment0</span><span class="p" data-group-id="1153826811-51">(</span><span class="p" data-group-id="1153826811-51">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_COLOR_ATTACHMENT0</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_framebuffer_complete</span><span class="p" data-group-id="1153826811-52">(</span><span class="p" data-group-id="1153826811-52">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_FRAMEBUFFER_COMPLETE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_read_framebuffer</span><span class="p" data-group-id="1153826811-53">(</span><span class="p" data-group-id="1153826811-53">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_READ_FRAMEBUFFER</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_draw_framebuffer</span><span class="p" data-group-id="1153826811-54">(</span><span class="p" data-group-id="1153826811-54">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_DRAW_FRAMEBUFFER</span><span class="p">.</span><span class="w">

</span><span class="nf">gl_texture_env</span><span class="p" data-group-id="1153826811-55">(</span><span class="p" data-group-id="1153826811-55">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_ENV</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_texture_env_mode</span><span class="p" data-group-id="1153826811-56">(</span><span class="p" data-group-id="1153826811-56">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_TEXTURE_ENV_MODE</span><span class="p">.</span><span class="w">
</span><span class="nf">gl_replace</span><span class="p" data-group-id="1153826811-57">(</span><span class="p" data-group-id="1153826811-57">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">GL_REPLACE</span><span class="p">.</span></code></pre>
<pre><code class="makeup erlang"><span class="w">
</span><span class="c1">%% src/wx_const.erl</span><span class="w">
</span><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="3269799275-1">(</span><span class="ss">wx_const</span><span class="p" data-group-id="3269799275-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">compile</span><span class="p" data-group-id="3269799275-2">(</span><span class="ss">nowarn_export_all</span><span class="p" data-group-id="3269799275-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">compile</span><span class="p" data-group-id="3269799275-3">(</span><span class="ss">export_all</span><span class="p" data-group-id="3269799275-3">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="3269799275-4">(</span><span class="s">&quot;wx/include/wx.hrl&quot;</span><span class="p" data-group-id="3269799275-4">)</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_id_any</span><span class="p" data-group-id="3269799275-5">(</span><span class="p" data-group-id="3269799275-5">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxID_ANY</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_gl_rgba</span><span class="p" data-group-id="3269799275-6">(</span><span class="p" data-group-id="3269799275-6">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_RGBA</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_gl_doublebuffer</span><span class="p" data-group-id="3269799275-7">(</span><span class="p" data-group-id="3269799275-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_DOUBLEBUFFER</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_gl_depth_size</span><span class="p" data-group-id="3269799275-8">(</span><span class="p" data-group-id="3269799275-8">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_DEPTH_SIZE</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_gl_forward_compat</span><span class="p" data-group-id="3269799275-9">(</span><span class="p" data-group-id="3269799275-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_FORWARD_COMPAT</span><span class="p">.</span><span class="w">

</span><span class="nf">wxk_left</span><span class="p" data-group-id="3269799275-10">(</span><span class="p" data-group-id="3269799275-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WXK_LEFT</span><span class="p">.</span><span class="w">
</span><span class="nf">wxk_right</span><span class="p" data-group-id="3269799275-11">(</span><span class="p" data-group-id="3269799275-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WXK_RIGHT</span><span class="p">.</span><span class="w">
</span><span class="nf">wxk_up</span><span class="p" data-group-id="3269799275-12">(</span><span class="p" data-group-id="3269799275-12">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WXK_UP</span><span class="p">.</span><span class="w">
</span><span class="nf">wxk_down</span><span class="p" data-group-id="3269799275-13">(</span><span class="p" data-group-id="3269799275-13">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WXK_DOWN</span><span class="p">.</span><span class="w">
</span><span class="nf">wxk_space</span><span class="p" data-group-id="3269799275-14">(</span><span class="p" data-group-id="3269799275-14">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WXK_SPACE</span><span class="p">.</span><span class="w">
</span><span class="nf">wxk_raw_control</span><span class="p" data-group-id="3269799275-15">(</span><span class="p" data-group-id="3269799275-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WXK_RAW_CONTROL</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_gl_major_version</span><span class="p" data-group-id="3269799275-16">(</span><span class="p" data-group-id="3269799275-16">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_MAJOR_VERSION</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_gl_minor_version</span><span class="p" data-group-id="3269799275-17">(</span><span class="p" data-group-id="3269799275-17">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_MINOR_VERSION</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_gl_core_profile</span><span class="p" data-group-id="3269799275-18">(</span><span class="p" data-group-id="3269799275-18">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_CORE_PROFILE</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_gl_sample_buffers</span><span class="p" data-group-id="3269799275-19">(</span><span class="p" data-group-id="3269799275-19">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_SAMPLE_BUFFERS</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_gl_samples</span><span class="p" data-group-id="3269799275-20">(</span><span class="p" data-group-id="3269799275-20">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="n">WX_GL_SAMPLES</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_null_cursor</span><span class="p" data-group-id="3269799275-21">(</span><span class="p" data-group-id="3269799275-21">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxNullCursor</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_cursor_blank</span><span class="p" data-group-id="3269799275-22">(</span><span class="p" data-group-id="3269799275-22">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxCURSOR_BLANK</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_cursor_cross</span><span class="p" data-group-id="3269799275-23">(</span><span class="p" data-group-id="3269799275-23">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxCURSOR_CROSS</span><span class="p">.</span><span class="w">

</span><span class="nf">wx_fontfamily_default</span><span class="p" data-group-id="3269799275-24">(</span><span class="p" data-group-id="3269799275-24">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxFONTFAMILY_DEFAULT</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_fontfamily_teletype</span><span class="p" data-group-id="3269799275-25">(</span><span class="p" data-group-id="3269799275-25">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxFONTFAMILY_TELETYPE</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_normal</span><span class="p" data-group-id="3269799275-26">(</span><span class="p" data-group-id="3269799275-26">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxNORMAL</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_fontstyle_normal</span><span class="p" data-group-id="3269799275-27">(</span><span class="p" data-group-id="3269799275-27">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxFONTSTYLE_NORMAL</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_fontweight_bold</span><span class="p" data-group-id="3269799275-28">(</span><span class="p" data-group-id="3269799275-28">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxFONTWEIGHT_BOLD</span><span class="p">.</span><span class="w">
</span><span class="nf">wx_fontweight_normal</span><span class="p" data-group-id="3269799275-29">(</span><span class="p" data-group-id="3269799275-29">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="o">?</span><span class="ss">wxFONTWEIGHT_NORMAL</span><span class="p">.</span></code></pre>
<p>
Also add wx to <code class="inline">extra_applications</code> in <code class="inline">mix.exs</code>:</p>
<pre><code class="makeup elixir"><span class="w">  </span><span class="kd">def</span><span class="w"> </span><span class="nf">application</span><span class="w"> </span><span class="k" data-group-id="8150000793-1">do</span><span class="w">
    </span><span class="p" data-group-id="8150000793-2">[</span><span class="w">
      </span><span class="ss">extra_applications</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8150000793-3">[</span><span class="ss">:logger</span><span class="p">,</span><span class="w"> </span><span class="ss">:wx</span><span class="p" data-group-id="8150000793-3">]</span><span class="w">
    </span><span class="p" data-group-id="8150000793-2">]</span><span class="w">
  </span><span class="k" data-group-id="8150000793-1">end</span></code></pre>
<p>
For reference, this is the link to the Erlang WX documentation: <a href="https://www.erlang.org/doc/apps/wx/chapter.html">https://www.erlang.org/doc/apps/wx/chapter.html</a></p>
<p>
Following along here with <a href="https://ianhedoesit.com/blog/triangle.html">Ian’s Triangle post</a>, we will also add the records from wx.hrl to our project:</p>
<pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">WxRecords</span><span class="w"> </span><span class="k" data-group-id="8028548103-1">do</span><span class="w">
  </span><span class="kn">require</span><span class="w"> </span><span class="nc">Record</span><span class="w">

  </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="8028548103-2">{</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">record</span><span class="p" data-group-id="8028548103-2">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Record</span><span class="o">.</span><span class="n">extract_all</span><span class="p" data-group-id="8028548103-3">(</span><span class="ss">from_lib</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;wx/include/wx.hrl&quot;</span><span class="p" data-group-id="8028548103-3">)</span><span class="w"> </span><span class="k" data-group-id="8028548103-4">do</span><span class="w">
    </span><span class="nc">Record</span><span class="o">.</span><span class="n">defrecord</span><span class="p" data-group-id="8028548103-5">(</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">record</span><span class="p" data-group-id="8028548103-5">)</span><span class="w">
  </span><span class="k" data-group-id="8028548103-4">end</span><span class="w">
</span><span class="k" data-group-id="8028548103-1">end</span></code></pre>
<p>
Finally, we can add a module to render our window!</p>
<pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">GlTest.Window</span><span class="w"> </span><span class="k" data-group-id="0985489436-1">do</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">WxRecords</span><span class="w">

  </span><span class="na">@behaviour</span><span class="w"> </span><span class="ss">:wx_object</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">start_link</span><span class="p" data-group-id="0985489436-2">(</span><span class="bp">_</span><span class="p" data-group-id="0985489436-2">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-3">do</span><span class="w">
    </span><span class="nc">:wx_object</span><span class="o">.</span><span class="n">start_link</span><span class="p" data-group-id="0985489436-4">(</span><span class="bp">__MODULE__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0985489436-5">[</span><span class="p" data-group-id="0985489436-5">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0985489436-6">[</span><span class="p" data-group-id="0985489436-6">]</span><span class="p" data-group-id="0985489436-4">)</span><span class="w">
    </span><span class="p" data-group-id="0985489436-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="p" data-group-id="0985489436-8">(</span><span class="p" data-group-id="0985489436-8">)</span><span class="p" data-group-id="0985489436-7">}</span><span class="w">
  </span><span class="k" data-group-id="0985489436-3">end</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="ss">:wx_object</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">init</span><span class="p" data-group-id="0985489436-9">(</span><span class="bp">_</span><span class="p" data-group-id="0985489436-9">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-10">do</span><span class="w">
    </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="0985489436-11">[</span><span class="ss">size</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0985489436-12">{</span><span class="mi">800</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p" data-group-id="0985489436-12">}</span><span class="p" data-group-id="0985489436-11">]</span><span class="w">
    </span><span class="n">wx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">:wx</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0985489436-13">(</span><span class="p" data-group-id="0985489436-13">)</span><span class="w">
    </span><span class="n">frame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">:wxFrame</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0985489436-14">(</span><span class="n">wx</span><span class="p">,</span><span class="w"> </span><span class="nc">:wx_const</span><span class="o">.</span><span class="n">wx_id_any</span><span class="p" data-group-id="0985489436-15">(</span><span class="p" data-group-id="0985489436-15">)</span><span class="p">,</span><span class="w"> </span><span class="s">~c&quot;Hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="0985489436-14">)</span><span class="w">
    </span><span class="nc">:wxWindow</span><span class="o">.</span><span class="n">connect</span><span class="p" data-group-id="0985489436-16">(</span><span class="n">frame</span><span class="p">,</span><span class="w"> </span><span class="ss">:close_window</span><span class="p" data-group-id="0985489436-16">)</span><span class="w">

    </span><span class="nc">:wxFrame</span><span class="o">.</span><span class="n">show</span><span class="p" data-group-id="0985489436-17">(</span><span class="n">frame</span><span class="p" data-group-id="0985489436-17">)</span><span class="w">

    </span><span class="n">gl_attrib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="0985489436-18">[</span><span class="w">
      </span><span class="ss">attribList</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0985489436-19">[</span><span class="w">
        </span><span class="nc">:wx_const</span><span class="o">.</span><span class="n">wx_gl_core_profile</span><span class="p" data-group-id="0985489436-20">(</span><span class="p" data-group-id="0985489436-20">)</span><span class="p">,</span><span class="w">
        </span><span class="nc">:wx_const</span><span class="o">.</span><span class="n">wx_gl_major_version</span><span class="p" data-group-id="0985489436-21">(</span><span class="p" data-group-id="0985489436-21">)</span><span class="p">,</span><span class="w">
        </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nc">:wx_const</span><span class="o">.</span><span class="n">wx_gl_minor_version</span><span class="p" data-group-id="0985489436-22">(</span><span class="p" data-group-id="0985489436-22">)</span><span class="p">,</span><span class="w">
        </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nc">:wx_const</span><span class="o">.</span><span class="n">wx_gl_doublebuffer</span><span class="p" data-group-id="0985489436-23">(</span><span class="p" data-group-id="0985489436-23">)</span><span class="p">,</span><span class="w">
        </span><span class="mi">0</span><span class="w">
      </span><span class="p" data-group-id="0985489436-19">]</span><span class="w">
    </span><span class="p" data-group-id="0985489436-18">]</span><span class="w">

    </span><span class="n">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">:wxGLCanvas</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0985489436-24">(</span><span class="n">frame</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="n">gl_attrib</span><span class="p" data-group-id="0985489436-24">)</span><span class="w">
    </span><span class="n">ctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">:wxGLContext</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0985489436-25">(</span><span class="n">canvas</span><span class="p" data-group-id="0985489436-25">)</span><span class="w">
    </span><span class="nc">:wxGLCanvas</span><span class="o">.</span><span class="n">setCurrent</span><span class="p" data-group-id="0985489436-26">(</span><span class="n">canvas</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="p" data-group-id="0985489436-26">)</span><span class="w">

    </span><span class="n">send</span><span class="p" data-group-id="0985489436-27">(</span><span class="n">self</span><span class="p" data-group-id="0985489436-28">(</span><span class="p" data-group-id="0985489436-28">)</span><span class="p">,</span><span class="w"> </span><span class="ss">:update</span><span class="p" data-group-id="0985489436-27">)</span><span class="w">

    </span><span class="p" data-group-id="0985489436-29">{</span><span class="n">frame</span><span class="p">,</span><span class="w">
     </span><span class="p" data-group-id="0985489436-30">%{</span><span class="w">
       </span><span class="ss">frame</span><span class="p">:</span><span class="w"> </span><span class="n">frame</span><span class="p">,</span><span class="w">
       </span><span class="ss">canvas</span><span class="p">:</span><span class="w"> </span><span class="n">canvas</span><span class="w">
     </span><span class="p" data-group-id="0985489436-30">}</span><span class="p" data-group-id="0985489436-29">}</span><span class="w">
  </span><span class="k" data-group-id="0985489436-10">end</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="ss">:wx_object</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_event</span><span class="p" data-group-id="0985489436-31">(</span><span class="n">wx</span><span class="p" data-group-id="0985489436-32">(</span><span class="ss">event</span><span class="p">:</span><span class="w"> </span><span class="n">wxClose</span><span class="p" data-group-id="0985489436-33">(</span><span class="p" data-group-id="0985489436-33">)</span><span class="p" data-group-id="0985489436-32">)</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-31">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-34">do</span><span class="w">
    </span><span class="p" data-group-id="0985489436-35">{</span><span class="ss">:stop</span><span class="p">,</span><span class="w"> </span><span class="ss">:normal</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-35">}</span><span class="w">
  </span><span class="k" data-group-id="0985489436-34">end</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="ss">:wx_object</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_info</span><span class="p" data-group-id="0985489436-36">(</span><span class="ss">:stop</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0985489436-37">%{</span><span class="ss">canvas</span><span class="p">:</span><span class="w"> </span><span class="n">canvas</span><span class="p" data-group-id="0985489436-37">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-36">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-38">do</span><span class="w">
    </span><span class="nc">:wxGLCanvas</span><span class="o">.</span><span class="n">destroy</span><span class="p" data-group-id="0985489436-39">(</span><span class="n">canvas</span><span class="p" data-group-id="0985489436-39">)</span><span class="w">

    </span><span class="p" data-group-id="0985489436-40">{</span><span class="ss">:stop</span><span class="p">,</span><span class="w"> </span><span class="ss">:normal</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-40">}</span><span class="w">
  </span><span class="k" data-group-id="0985489436-38">end</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="ss">:wx_object</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_info</span><span class="p" data-group-id="0985489436-41">(</span><span class="ss">:update</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-41">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-42">do</span><span class="w">
    </span><span class="n">render</span><span class="p" data-group-id="0985489436-43">(</span><span class="n">state</span><span class="p" data-group-id="0985489436-43">)</span><span class="w">

    </span><span class="p" data-group-id="0985489436-44">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-44">}</span><span class="w">
  </span><span class="k" data-group-id="0985489436-42">end</span><span class="w">

  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">render</span><span class="p" data-group-id="0985489436-45">(</span><span class="p" data-group-id="0985489436-46">%{</span><span class="ss">canvas</span><span class="p">:</span><span class="w"> </span><span class="n">canvas</span><span class="p" data-group-id="0985489436-46">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p" data-group-id="0985489436-45">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-47">do</span><span class="w">
    </span><span class="n">draw</span><span class="p" data-group-id="0985489436-48">(</span><span class="n">state</span><span class="p" data-group-id="0985489436-48">)</span><span class="w">
    </span><span class="nc">:wxGLCanvas</span><span class="o">.</span><span class="n">swapBuffers</span><span class="p" data-group-id="0985489436-49">(</span><span class="n">canvas</span><span class="p" data-group-id="0985489436-49">)</span><span class="w">
    </span><span class="n">send</span><span class="p" data-group-id="0985489436-50">(</span><span class="n">self</span><span class="p" data-group-id="0985489436-51">(</span><span class="p" data-group-id="0985489436-51">)</span><span class="p">,</span><span class="w"> </span><span class="ss">:update</span><span class="p" data-group-id="0985489436-50">)</span><span class="w">

    </span><span class="ss">:ok</span><span class="w">
  </span><span class="k" data-group-id="0985489436-47">end</span><span class="w">

  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">draw</span><span class="p" data-group-id="0985489436-52">(</span><span class="p" data-group-id="0985489436-53">%{</span><span class="ss">canvas</span><span class="p">:</span><span class="w"> </span><span class="c">_canvas</span><span class="p" data-group-id="0985489436-53">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="c">_state</span><span class="p" data-group-id="0985489436-52">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-54">do</span><span class="w">
    </span><span class="nc">:gl</span><span class="o">.</span><span class="n">clearColor</span><span class="p" data-group-id="0985489436-55">(</span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p" data-group-id="0985489436-55">)</span><span class="w">
    </span><span class="nc">:gl</span><span class="o">.</span><span class="n">clear</span><span class="p" data-group-id="0985489436-56">(</span><span class="nc">:gl_const</span><span class="o">.</span><span class="n">gl_color_buffer_bit</span><span class="p" data-group-id="0985489436-57">(</span><span class="p" data-group-id="0985489436-57">)</span><span class="p" data-group-id="0985489436-56">)</span><span class="w">

    </span><span class="ss">:ok</span><span class="w">
  </span><span class="k" data-group-id="0985489436-54">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">child_spec</span><span class="p" data-group-id="0985489436-58">(</span><span class="n">opts</span><span class="p" data-group-id="0985489436-58">)</span><span class="w"> </span><span class="k" data-group-id="0985489436-59">do</span><span class="w">
    </span><span class="p" data-group-id="0985489436-60">%{</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="bp">__MODULE__</span><span class="p">,</span><span class="w">
      </span><span class="ss">start</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0985489436-61">{</span><span class="bp">__MODULE__</span><span class="p">,</span><span class="w"> </span><span class="ss">:start_link</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0985489436-62">[</span><span class="n">opts</span><span class="p" data-group-id="0985489436-62">]</span><span class="p" data-group-id="0985489436-61">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">restart</span><span class="p">:</span><span class="w"> </span><span class="ss">:permanent</span><span class="w">
    </span><span class="p" data-group-id="0985489436-60">}</span><span class="w">
  </span><span class="k" data-group-id="0985489436-59">end</span><span class="w">
</span><span class="k" data-group-id="0985489436-1">end</span></code></pre>
<p>
And then we can add it to our <code class="inline">application.ex</code> and fire up <code class="inline">iex -S mix</code>:</p>
<pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Gltest.Application</span><span class="w"> </span><span class="k" data-group-id="3444893115-1">do</span><span class="w">
  </span><span class="c1"># See https://hexdocs.pm/elixir/Application.html</span><span class="w">
  </span><span class="c1"># for more information on OTP Applications</span><span class="w">
  </span><span class="na">@moduledoc</span><span class="w"> </span><span class="no">false</span><span class="w">

  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Application</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">start</span><span class="p" data-group-id="3444893115-2">(</span><span class="c">_type</span><span class="p">,</span><span class="w"> </span><span class="c">_args</span><span class="p" data-group-id="3444893115-2">)</span><span class="w"> </span><span class="k" data-group-id="3444893115-3">do</span><span class="w">
    </span><span class="n">children</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3444893115-4">[</span><span class="w">
      </span><span class="nc">GlTest.Window</span><span class="w">
    </span><span class="p" data-group-id="3444893115-4">]</span><span class="w">

    </span><span class="c1"># See https://hexdocs.pm/elixir/Supervisor.html</span><span class="w">
    </span><span class="c1"># for other strategies and supported options</span><span class="w">
    </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3444893115-5">[</span><span class="ss">strategy</span><span class="p">:</span><span class="w"> </span><span class="ss">:one_for_one</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="nc">Gltest.Supervisor</span><span class="p" data-group-id="3444893115-5">]</span><span class="w">
    </span><span class="nc">Supervisor</span><span class="o">.</span><span class="n">start_link</span><span class="p" data-group-id="3444893115-6">(</span><span class="n">children</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="3444893115-6">)</span><span class="w">
  </span><span class="k" data-group-id="3444893115-3">end</span><span class="w">
</span><span class="k" data-group-id="3444893115-1">end</span></code></pre>
<p>
It’s important to note that we’re returning <code class="inline">{:ok, self()}</code> from <code class="inline">start_link/1</code>, because if 
you just return the value of <code class="inline">:wx_object.start_link/3</code> the process will crash, because what that 
returns does <em>not</em> match what <code class="inline">Supervisor.start_link/2</code> expects. That said, this <em>should</em> get 
a nice, Elixir-y purple window to appear on your screen. I’m running this code under WSL 2,
but it should work on any platform that supports Erlang and WX, which should be most of them. I know
that <a href="https://github.com/ScenicFramework/scenic">Scenic</a> has a specific driver for Nerves devices, so I wouldn’t expect that would work
out of the box, but I’d guess it works on MacOS.</p>
<p>
  <img src="/assets/images/09-10-2024-screenshot.png" alt="A working purple window">
</p>

  </article>

      </main>
      <footer class="mt-24 bg-bludacris p-4 text-center">
        © Andy LeClair 2024 | <a href="/atom.xml">Atom</a> | <a href="/feed.xml">RSS</a>
      </footer>
    </div>
  </body>
</html>